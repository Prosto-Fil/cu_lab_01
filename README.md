# Лабораторная работа №1 - Алгоритм Брезенхема

![Демонстрация работы](https://github.com/Prosto-Fil/cu_lab_01/blob/main/cu_lab_01.gif)

Алгоритм Брезенхе́ма (англ. Bresenham's line algorithm) — это алгоритм, определяющий, какие точки двумерного растра нужно закрасить, чтобы получить близкое приближение прямой линии между двумя заданными точками. Это один из старейших алгоритмов в машинной графике — он был разработан Джеком Элтоном Брезенхэмом (англ. Jack Elton Bresenham) в компании IBM в 1962 году. Алгоритм широко используется, в частности, для рисования линий на экране компьютера. Существует обобщение алгоритма Брезенхэма для построения кривых 2-го порядка.

# Алгоритм

Отрезок проводится между двумя точками — {\displaystyle (x_{0},y_{0})}(x_0, y_0) и {\displaystyle (x_{1},y_{1})}(x_{1},y_{1}), где в этих парах указаны столбец и строка соответственно, номера которых растут вправо и вниз. Сначала мы будем предполагать, что наша линия идёт вправо и вниз, причём горизонтальное расстояние {\displaystyle x_{1}-x_{0}}x_{1}-x_{0} превосходит вертикальное {\displaystyle y_{1}-y_{0}}y_{1}-y_{0}, то есть наклон линии от горизонтали — менее 45°. Наша цель состоит в том, чтобы для каждого столбца x между {\displaystyle x_{0}}x_{0} и {\displaystyle x_{1}}x_{1} определить, какая строка y ближе всего к линии, и нарисовать точку {\displaystyle (x,y)}(x, y).

Общая формула линии между двумя точками:

{\displaystyle y-y_{0}={\frac {y_{1}-y_{0}}{x_{1}-x_{0}}}(x-x_{0}).}y-y_{0}={\frac  {y_{1}-y_{0}}{x_{1}-x_{0}}}(x-x_{0}).
Поскольку мы знаем колонку {\displaystyle x}x, то строка {\displaystyle y}y получается округлением к целому следующего значения:

{\displaystyle y={\frac {y_{1}-y_{0}}{x_{1}-x_{0}}}(x-x_{0})+y_{0}.}y={\frac  {y_{1}-y_{0}}{x_{1}-x_{0}}}(x-x_{0})+y_{0}.
Однако, вычислять точное значение этого выражения нет необходимости. Достаточно заметить, что {\displaystyle y}y уменьшается от {\displaystyle y_{0}}y_0 и за каждый шаг мы добавляем к {\displaystyle x}x единицу и добавляем к {\displaystyle y}y значение наклона (в нашем случае значение наклона будет отрицательным числом):

{\displaystyle s={\frac {y_{1}-y_{0}}{x_{1}-x_{0}}},}s={\frac  {y_{1}-y_{0}}{x_{1}-x_{0}}},
которое можно вычислить заранее. Более того, на каждом шаге мы делаем одно из двух: либо сохраняем тот же y, либо уменьшаем его на 1.

Что из этих двух выбрать — можно решить, отслеживая значение ошибки, которое означает — вертикальное расстояние между текущим значением y и точным значением y для текущего x. Всякий раз, когда мы увеличиваем x, мы увеличиваем значение ошибки на величину наклона s, приведённую выше. Если ошибка превысила 1.0, линия стала ближе к следующему y, поэтому мы увеличиваем y на 1.0, одновременно уменьшая значение ошибки на 1.0.
